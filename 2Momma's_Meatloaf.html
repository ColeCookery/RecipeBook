<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Momma's Meatloaf</title>
    <link rel="stylesheet" href="functions/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!-- Navbar -->
    <div class="header">
        <div id="navbar"></div>
        
    </div>

    <!-- Main Content Wrapper -->
    <main class="recipe-page">
        <header class="recipe-header">
            <h1>Momma's Meatloaf</h1>
            <div class="image-container">
                <img class="recipe-image" src="pictures/meatloaf.png" alt="Momma's Meatloaf">
            </div>
        </header>

        <!-- Ingredients Section -->
        <section class="ingredients">
            <h2>Ingredients</h2>
            <pre>
Ground Beef or Turkey
Onion
Garlic
Breadcrumbs
Tomato Sauce
Egg
Worcestershire Sauce
Salt & Pepper
Glaze
    Ketchup (Tomato Sauce)
    Brown Sugar
    Grainy Mustard
            </pre>
        </section>

        <!-- Instructions Section -->
        <section class="instructions">
            <h2>Instructions</h2>
            <pre>Preheat oven to 350
Dice onion and a few garlic gloves
Heat in pan over medium heat 
Combine in large bowl: 
    1.5 lbs ground meat
    1 egg
    1 cup breadcrumbs (if too sticky add more)
    1/2 cup tomato sauce (if too dry add more)
    Splash of Worcestershire sauce
    Season with salt & pepper
Mix with spatula or hands until homogenous
Mix in onion and garlic once they are translucent
Put mixture into loaf pan (can line with parchment paper for easier removal)
Mix together glaze:
    1/4 cup of ketchup (or tomato sauce)
    1 tbsp brown sugar
    1 tbsp grainy mustard
Smooth top of mixture in loaf pan and brush liberally with glaze
Cook in oven for 60-75 minutes or until proper internal temperature</pre>
        </section>

        <!-- Links Section -->
        <footer class="recipe-footer">
            <a href="#" id="category-link">Back to Category</a> | <a href="index.html">Back to Homepage</a>
        </footer>
    </main>

    <script>
        // Function to set up event listeners for the navbar
        function setupNavbarEventListeners() {
            const toggleButton = document.querySelector('.menu-toggle');
            const menuDropdown = document.querySelector('.menu-dropdown');
            const closeButton = document.querySelector('.close-menu');

            // Check if elements are found
            if (!toggleButton) {
                alert('Toggle button not found!');
                console.error('Toggle button not found!');
                return;
            }
            if (!menuDropdown) {
                alert('Dropdown menu not found!');
                console.error('Dropdown menu not found!');
                return;
            }
            if (!closeButton) {
                alert('Close button not found!');
                console.error('Close button not found!');
                return;
            }

            toggleButton.addEventListener('click', () => {
                menuDropdown.classList.toggle('show'); // Show or hide the dropdown menu
            });

            closeButton.addEventListener('click', () => {
                menuDropdown.classList.remove('show'); // Hide the dropdown menu
            });
        }
    
        // Fetching the navbar and inserting it into the page
        fetch('navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            })
            .catch(error => console.error('Error loading navbar:', error));

        // Fetch recipe data and update the category link
        const recipeName = "Momma's Meatloaf"; // Replace this with the actual recipe title dynamically
    
        fetch('functions/recipes.json')
            .then(response => response.json())
            .then(data => {
                const recipe = data.find(r => r.name === recipeName);
                if (recipe) {
                    const categoryLink = document.getElementById('category-link');
                    categoryLink.href = `1${recipe.category.toLowerCase().replace(' ', '-')}.html`;
                    categoryLink.innerText = `Back`;
                } else {
                    console.error('Recipe not found:', recipeName);
                }
            })
            .catch(error => console.error('Error loading recipes:', error));
    </script>
</body>
</html>